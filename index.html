<html>

    <head>
        <meta charset="utf-8">
        <title>GW2Gardener</title>        
    </head>
    <body>
        <p id="p1" />
        <p id="p2" />
        <p id="p3" />
        <div id="resultsList"/>
    <script type="text/javascript">
    const GW2APIRequestString = "https://api.guildwars2.com/v2/commerce/prices?ids=12134,73113,12142,12135,12535";
    var resultsList = document.getElementById("resultsList");
    
        async function getItems(connString)
        {
            let response = await fetch(connString);
            let json = await response.json();
            var sorted = json.sort((a,b) => {
				return a.sells.unit_price - b.sells.unit_price;});
			sorted = sorted.reverse();
			
			
			
			
			if (json != null){
                for (var i = 0; i < sorted.length; i++) {
                            let nextParagraph = document.createElement('p');
                            e = sorted[i];
                            itemID = JSON.stringify(e.id);
                            itemPrice = JSON.stringify(e.sells.unit_price);
                            nextParagraph.innerHTML = "ID:" + itemID + "sells for:" + itemPrice;
                            resultsList.appendChild(nextParagraph);
                            
                }
            }
        }
        getItems(GW2APIRequestString);
		
        
        </script>
    
    
    
    
    
    
    </body>
</html>